'use strict';

var cdb = require('cdb');

function readCdb(file, callback) {
    var reader = cdb.createReader(file);

    reader.dump(function (error, data) {
        var result = {};
        if (!error && data) {
            var value;

            Object.keys(data).forEach(function (key) {
                value = data[key];
                result[key] = Array.isArray(value) ? value[0] : value;
            });
        }
        callback(error, result);
    });
}

module.exports = {
    readCdb: readCdb
};