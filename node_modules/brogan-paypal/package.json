{
  "name": "brogan-paypal",
  "version": "3.0.6",
  "description": "Module for adding PayPal support to kraken.js applications",
  "main": "lib/brogan.js",
  "repository": {
    "type": "git",
    "url": "git@github.paypal.com:NodeInfra/brogan.git"
  },
  "homepage": "https://github.paypal.com/NodeInfra/brogan",
  "author": {
    "name": "Erik Toth",
    "email": "ertoth@paypal.com"
  },
  "contributors": [
    {
      "name": "Sanjeev Koranga",
      "email": "skoranga@paypal.com"
    },
    {
      "name": "Jeff Harrell",
      "email": "jeharrell@paypal.com"
    },
    {
      "name": "Trevor Livingston",
      "email": "trlivingston@paypal.com"
    }
  ],
  "readmeFilename": "README.md",
  "dependencies": {
    "async": "^1.0.0",
    "caller": "^1.0.0",
    "confit": "^1.2.0",
    "debuglog": "^1.0.1",
    "environment-paypal": "^1.0",
    "objutil": "~0.4.0",
    "shush": "^1.0.0",
    "try-require": "^1.0.0",
    "vault": "^1.1.1"
  },
  "peerDependencies": {
    "cal": "^0.5",
    "commons-paypal": ">=1.3.4",
    "connect-mayfly": ">=0.3.4",
    "continuation-local-storage": "^3.1.0",
    "device-detection-paypal": "^1.0.0",
    "ecv-paypal": "^1.0",
    "express-meta": ">=0.1.0",
    "keebler-paypal": "^1.0.0",
    "monitor-paypal": ">=1.1.7",
    "pplogger": ">=0.3.1",
    "servicecore": ">=1.4.8",
    "topos": ">=0.3.6"
  },
  "devDependencies": {
    "analytics-paypal": "^1.0.0",
    "cal": "^0.5",
    "chai": "^2",
    "commons-paypal": "^1.3.4",
    "connect-mayfly": "^0.3",
    "continuation-local-storage": "^3.1.0",
    "device-detection-paypal": "^1.0.0",
    "ecv-paypal": "^1.0",
    "express": "^4.1.1",
    "express-meta": "^0.1.0",
    "istanbul": "~0.3",
    "jshint": "^2.4.1",
    "keebler-paypal": "^1.0.0",
    "kraken-js": "^1.0.0",
    "mocha": "^2",
    "monitor-paypal": "^1.1.7",
    "pplogger": "^0.3.1",
    "servicecore": "^1.0.0",
    "topos": "^0.3"
  },
  "scripts": {
    "test": "mocha test/*.js --reporter tap",
    "cover": "istanbul cover node_modules/.bin/_mocha -- -R spec test/*.js",
    "lint": "jshint -c .jshintrc ./lib/*.js"
  },
  "readme": "# brogan\n\nA simple module for adding PayPal support to kraken applications.\n\n### Features\n\n`brogan` adds support for the following:\n\n- topos\n- vault protocol in configs\n- servicecore configuration\n- provide standard Infra configuration\n- enforces these Infra dependencies\n    - cal\n    - commons-paypal\n    - pplogger\n    - express-meta\n    - ecv-paypal\n    - analytics-paypal\n    - keebler-paypal\n    - monitor-paypal\n    - connect-mayfly\n    - device-detection-paypal\n\n\n### API\n`brogan` is designed to work as a wrapper for krakenjs's configuration options.\n\nExample:\n\n```javascript\nvar app = express(),\n    kraken = require('kraken-js'),\n    brogan = require('brogan-paypal'),\n    options = {\n        onconfig: function(config, next) {\n            next(null, config);\n        }\n    };\n\napp.use(kraken(brogan(options)));\n\napp.listen(port, function (err) {\n    if (err) {\n        console.error(err);\n    }\n});\n```\n\nFor all configuration options, see [kraken-js optons](https://github.com/krakenjs/kraken-js#options).\n\n### Using vault protocol handlers in configs (or topos)\n\nTo use `vault` keys in configurations, simply use the `vault:` protocol handler.\n\nExample:\n\n```json\n{\n    \"client_credentials\": \"vault:client_credentials\"\n}\n```\n\n### Vault options\n\nAdditional `vault` options can be passed in the brogan configuration as a `vault` property.\n\nExample:\n\n```javascript\nvar options = {\n    onconfig: function(config, next) {\n        next(null, config);\n    },\n    vault: vaultOptions\n};\n\nvar app = kraken(brogan(options));\n```\n\nSee [vault options](https://github.paypal.com/NodeInfra/node-vault#api).\n\n### `brogan-paypal@^3` explained\n\n##### Consistent Infra dependencies and middleware order\n \nTo avoid repeating past incidents where the sole reason of app failing was either missing infra dependency or middleware misconfiguration in `config.json`. Now brogan will injects these default (https://github.paypal.com/NodeInfra/brogan/blob/a4d23829ecfdb240a17f34e265717ab06bfbad96/config/config.json#L39) Infra dependencies. Ideally you should let these configs take into effect and override only if app requires non-default configuartions. \n\nAlong with above config changes, `brogan-paypal@^3` will ensure app upgrade to minimum stable version of these Infra modules - https://github.paypal.com/NodeInfra/brogan/blob/a4d23829ecfdb240a17f34e265717ab06bfbad96/package.json#L41.\n\n##### Faster ECV check\n\nWith this brogan upgrade, we added `ecv-paypal` module with meddleware priority `51`. Means now ecv requests (OPS request to check if app is up and responsive or not) will be much lighter & faster. Putting it before all the other middlewares means it won't consume too many resources while app is taking regular traffic. \n\nNow on an average ECV requests (usually once every 5s) takes 0.02-0.1ms instead of 1-2ms to respond. \n\n##### CSRF mismatch fix\n\nCSRF mismatch has been one of the common cause of errors and great mystery in node apps. \nSometime it might be some hacker trying to fiddle around or other times it might be the combination of `async; fire and forgot` nature of express-session module and high latency in mayfly save call(~>15ms).\n\nNow for any http response end's, before express-session try to save the session in `async; fire and forgot` manner; connect-mayfly's `forceSessionSave` middleware will save the session (earlier this logic was in `pplogger`) in `sync; get ack` way. This will make sure session is saved for sure, before the next request comes and asks for the same session object. So no false CSRF mismatch issues.\n",
  "_id": "brogan-paypal@3.0.6",
  "_shasum": "5de072e3a03f5121bc3294b7eecc369562718c98",
  "_from": "brogan-paypal@^3.0.0",
  "_resolved": "http://npm.paypal.com/brogan-paypal/-/brogan-paypal-3.0.6.tgz"
}
