Node.js client for Sherlock Frontier
===============================

Sherlock Frontier is the entry point for Sherlock Monitoring Platform of PayPal Applications and agents submit metric time series and events to Frontier (Sherlock).

See

* [Sherlock Web Portal](http://sherlock)
* [Sherlock Wiki](https://engineering.paypalcorp.com/confluence/display/Monitoring/Sherlock)

### Configuration

```js
    hostAndPort: 'sherlock-ftrproxy-vip.qa.paypal.com:80',
    clientGroup: 'tenant=pp;env=qa;app_svc=nodejs',
    options: {
        connect_retry: true,
        connect_retry_interval_sec: 10,
        queue_capacity: 1000,
        first_message_id: -1
    }
```

### Usage

```js
var FrontierClient = require ('sherlock-frontier-client');
```

## Demo
The module contains a set of demos in directory **demo**:

 * [frontier-demo1.js](https://github.paypal.com/NodeInfra/node-sherlock-frontier-client/blob/master/demo/frontier-demo1.js) or {@link module:demo/frontier-demo1}.
 * [frontier-demo1-GA.js](https://github.paypal.com/NodeInfra/node-sherlock-frontier-client/blob/master/demo/frontier-demo1-GA.js) or {@link module:demo/frontier-demo1-GA}.
 * [frontier-demo2.js](https://github.paypal.com/NodeInfra/node-sherlock-frontier-client/blob/master/demo/frontier-demo2.js) or {@link module:demo/frontier-demo2}.
 * [frontier-demo3.js](https://github.paypal.com/NodeInfra/node-sherlock-frontier-client/blob/master/demo/frontier-demo3.js) or {@link module:demo/frontier-demo3}..

The demos can be executed with the following arguments:
````
node demo/frontier-demo1.js --ga --ep=frontier-host:port --cg=client_group --np=100 --qc=50
````

Arguments:

* --ga - use GA version of Frontier protocol (aka v1)
* --ep - end-point of the Frontier server to connect
* --cg - client group name to use (optional; see default value in the script)
* --np - number of post rounds to make during demo1
* --qc - request queue capacity
* --prt - use ``FrontierClient.PostReliability.ENSURE_TRANSMISSION``
* --pra - use ``FrontierClient.PostReliability.ENSURE_ACK``
* --prp - use ``FrontierClient.PostReliability.ENSURE_PROCESSED``

The last 3 options are mutually exclusive.

## Debug output
The module generates extra debug output on stderr if the value of environment variable ``NODE_DEBUG`` contains the name of this module as shown below:

````
NODE_DEBUG=sherlock-frontier-client node demo/frontier-demo1.js [args]
````

# Concept Guide
[Concept Guide](https://github.paypal.com/NodeInfra/node-sherlock-frontier-client/blob/master/tutorials/concept_guide.md) or click here {@tutorial concept_guide} if the other link is broken

# API User Guide
[API User Guide](https://github.paypal.com/NodeInfra/node-sherlock-frontier-client/blob/master/tutorials/user_guide.md) or click here {@tutorial user_guide} if the other link is broken

# API Reference
Generated JSDoc HTML is hosted here:
[API Reference](https://github.paypal.com/pages/NodeInfra/node-sherlock-frontier-client/)

Other references:

- [FrontierClientGA](FrontierClientGA.html) - Protocol
- [SignedInt32RingBuffer](SignedInt32RingBuffer.html)
- [SignedInt32](SignedInt32.html)
